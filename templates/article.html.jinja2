<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Task One</title>
        <!-- styles -->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='bower_components/bootstrap/dist/css/bootstrap.min.css') }}">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
    </head>
    <body style=>
        <div class="container-fluid">
            <div class="row">
                <div id="left-column" class="col">
                    <div class="list-group list-group-flush border-bottom overflow-auto vh-100">
                        {% for doc_id, article in articles.items() %}
                            <a href="{{url_for('get_article', doc_id=doc_id)}}" class="list-group-item list-group-item-action py-3 lh-tight article">
                                <div id="{{doc_id}}">  
                                    <strong>{{article.title}}</strong>
                                    <p class="summary">{{article.summary}}</p>
                                    <p>Ratings: 0</p>
                                </div>
                            </a>
                        {% endfor %}
                    </div>
                </div>
                <div id="main-area" class="col-7" style="height:100vh">
                    <div id="article-container" class="h-60">
                        {% for content_piece in article.contents %}
                            {{content_piece|safe}}
                        {% endfor %}
                    </div>
                    <div id="stock-matches" class="h-30">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th colspan=7>Model results</th>
                                </tr>
                                <tr>
                                    <th scope="col">rank</th>
                                    {% for key in article.stock_matches[0].keys() if key != "score" %}
                                        <th scope="col">{{key}}</th>
                                    {% endfor %}
                                </tr>
                            </thead>
                            <tbody>
                                {% for stock in article.stock_matches %}
                                    <tr>
                                        <th>{{loop.index}}</th>
                                        {% for key, value in stock.items() if key != "score"%}
                                            {% if key == "comment" %}
                                                <td>
                                                    <span class="comment">{{value}}</span>
                                                </td>
                                            {% else %}
                                                <td>{{value}}</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div id="likert-scale" class="h-10 row">
                        <div class="col vertical-align-middle">
                            <div>
                                <h5 style="padding-top:10px;">Evaluation:</h5>
                            </div>
                        </div>
                        <div class="col-8 row">
                            <div class="vertical-align-middle">
                                <input type="radio" class="btn-check" name="rating" id="rating-1" autocomplete="off">
                                <label class="btn btn-outline-primary" for="rating-1">Very Poor</label>

                                <input type="radio" class="btn-check" name="rating" id="rating-2" autocomplete="off">
                                <label class="btn btn-outline-primary" for="rating-2">Poor</label>

                                <input type="radio" class="btn-check" name="rating" id="rating-3" autocomplete="off">
                                <label class="btn btn-outline-primary" for="rating-3">Acceptable</label>

                                <input type="radio" class="btn-check" name="rating" id="rating-4" autocomplete="off">
                                <label class="btn btn-outline-primary" for="rating-4">Good</label>

                                <input type="radio" class="btn-check" name="rating" id="rating-5" autocomplete="off">
                                <label class="btn btn-outline-primary" for="rating-5">Very Good</label>
                            </div> 
                        </div>
                        <div class="col vertical-align-middle">
                            <button type="button" class="btn btn-success">Submit</button>
                        </div>
                    </div>
                </div>
                <div id="right-column" class="col" style="height:100vh">
                    <div id="article-metadata" class="h-25">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th cope="rows" colspan="2">Article metadata</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for key, value in article.items() if key in ["title", "url", "company", "ticker_top"] %}
                                    <tr>
                                        <th scope="row">{{key}}</th>
                                        {% if key == "url" %}
                                            <td><a href="{{value}}">{{value}}</a></td>
                                        {% else %}
                                            <td>{{value}}</td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div id="evaluation-instructions">
                        <h3> Evaluation instructions: Task One </h3>
                        <p>You are asked to evaluate model performance on a `stock retrieval task` for a given article.</p>
                        <p>The model produces a list of stocks from a pre-defined list based on their `relatedness` to a given article. This list of companies may consist of the company that is the topic of the article,  its competitors, companies in the similar sector or industry or companies that are related to the topic company or the article in some other way.</p>
                        <p>Task One is to evaluate the the validity and coherence of such lists.</p>
                        <p>The table of article metada (see: above) lists the main topic of the article (the `top` company the article is talking about), relevant stock ticker symbol as well as a link to the original article. You can use this information when evaluating model performance on this specific article.</p>
                        <p>The `rank` column of model results reflect the `relatedness` of the company to the article and should be considered when evaluating model results.</p>
                        <p>You should use the following evaluation criteria in Your evaluations</p>
                        <ul>
                            <li>Do model results reflect the economy sector discussed in the article?</li>
                            <li>Do model results reflect the economy industry discussed in the article?</li>
                            <li>Is the topic company (if there is one) present in model results?</li>
                            <li>Are companies (if there are some) that are related to the topic company in some way present in model results?</li>
                            <li>Personal knowledge on the topic of the article/sector/industry/topic company/related companies.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <script>
            document.getElementById("{{ article.doc_id }}").scrollIntoView({behavior: "smooth", block: "start"});
        </script>
    </body>
</html>